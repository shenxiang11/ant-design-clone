{"version":3,"file":"Space-01cd2452.js","sources":["../../src/components/Space/Item.tsx","../../node_modules/rc-util/lib/Children/toArray.js","../../src/components/Space/Space.tsx"],"sourcesContent":["import React from \"react\";\nimport {SpaceContext} from \"./Space.tsx\";\n\nexport interface ItemProps {\n  children: React.ReactNode;\n  index: number;\n  direction?: \"horizontal\" | \"vertical\";\n  split?: React.ReactNode;\n  wrap?: boolean;\n}\n\nexport default function Item({\n  index,\n  children,\n  split,\n}: ItemProps) {\n  const { latestIndex } = React.useContext(SpaceContext);\n\n  const style: React.CSSProperties = {}; // TODO: 不支持时，才需要\n\n  return (\n    <>\n      <div style={style}>\n        {children}\n      </div>\n      {\n        index < latestIndex && split && (\n          <span style={style}>\n            {split}\n          </span>\n        )\n      }\n    </>\n  )\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = toArray;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _reactIs = require(\"react-is\");\nfunction toArray(children) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var ret = [];\n  _react.default.Children.forEach(children, function (child) {\n    if ((child === undefined || child === null) && !option.keepEmpty) {\n      return;\n    }\n    if (Array.isArray(child)) {\n      ret = ret.concat(toArray(child));\n    } else if ((0, _reactIs.isFragment)(child) && child.props) {\n      ret = ret.concat(toArray(child.props.children, option));\n    } else {\n      ret.push(child);\n    }\n  });\n  return ret;\n}","import React from \"react\";\nimport classNames from \"classnames\";\nimport Item from \"./Item.tsx\";\nimport toArray from \"rc-util/lib/Children/toArray\";\n\nexport const SpaceContext = React.createContext({\n  latestIndex: 0,\n  horizontalSize: 0,\n  verticalSize: 0,\n});\n\n// TODO: 这里应该放在 config-provider 中。 https://github.com/ant-design/ant-design/blob/master/components/config-provider/SizeContext.tsx\nexport type SizeType = \"small\" | \"middle\" | \"large\" | undefined;\n\nexport type SpaceSize = SizeType | number;\n\nexport interface SpaceProps extends React.HTMLAttributes<HTMLDivElement> {\n  className?: string;\n  style?: React.CSSProperties;\n  align?: \"start\" | \"end\" | \"center\" | \"baseline\";\n  direction?: \"vertical\" | \"horizontal\";\n  size?: SpaceSize | [SpaceSize, SpaceSize];\n  split?: React.ReactNode;\n  wrap?: boolean;\n}\n\nconst spaceSize = {\n  small: 8,\n  middle: 16,\n  large: 24,\n};\n\nfunction getNumberSize(size: SpaceSize) {\n  return typeof size === \"string\" ? spaceSize[size] : size || 0;\n}\n\nconst Space = React.forwardRef<HTMLDivElement, SpaceProps>((props, ref) => {\n  const {\n    className,\n    direction,\n    size = \"small\", // TODO: 从 context 传递而来\n    wrap = false,\n    children,\n    align,\n    split,\n    ...otherProps\n  } = props;\n\n  const cn = classNames(className, \"inline-flex\", {\n    \"flex-col\": direction === \"vertical\",\n    \"flex-row\": direction === \"horizontal\",\n    \"items-start\": align === \"start\",\n    \"items-end\": align === \"end\",\n    \"items-center\": align === \"center\",\n    \"items-baseline\": align === \"baseline\",\n  });\n\n  // get SpaceSize | [SpaceSize, SpaceSize] 这种类型可以这么预处理一下，后面就只处理一种情况了\n  const [horizontalSize, verticalSize] = React.useMemo(\n    () =>\n      (\n        (Array.isArray(size) ? size : [size, size]) as [SpaceSize, SpaceSize]\n      ).map((item) => getNumberSize(item)),\n    [size]\n  );\n\n  const gapStyle: React.CSSProperties = {};\n\n  if (wrap) {\n    gapStyle.flexWrap = \"wrap\";\n  }\n\n  // TODO: 官方做了 flex gap 支持的检测\n  gapStyle.rowGap = horizontalSize;\n  gapStyle.columnGap = verticalSize;\n\n  let latestIndex = 0;\n  const childNodes = toArray(children, { keepEmpty: true });\n  const nodes = childNodes.map((child, i) => {\n    if (child !== null && child !== undefined) {\n      latestIndex = i;\n    }\n    const key = (child && child.key) || `item-${i}`;\n\n    return (\n      <Item key={key} index={i} split={split}>\n        {child}\n      </Item>\n    );\n  });\n\n  const spaceContext = React.useMemo(\n    () => ({\n      horizontalSize,\n      verticalSize,\n      latestIndex,\n    }),\n    []\n  );\n\n  return (\n    <div ref={ref} className={cn} style={{ ...gapStyle }} {...otherProps}>\n      <SpaceContext.Provider value={spaceContext}>\n        {nodes}\n      </SpaceContext.Provider>\n    </div>\n  );\n});\n\nexport default Space;\n"],"names":["Item","index","children","split","latestIndex","React","SpaceContext","style","jsxs","Fragment","jsx","_interopRequireDefault","require$$0","toArray_1","_default","toArray","_react","require$$1","_reactIs","require$$2","option","ret","child","spaceSize","getNumberSize","size","Space","props","ref","className","direction","wrap","align","otherProps","cn","classNames","horizontalSize","verticalSize","item","gapStyle","nodes","i","key","spaceContext"],"mappings":"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","x_google_ignoreList":[1]}